name: run main.py

on:
    # https://docs.github.com/fr/actions/writing-workflows/choosing-when-your-workflow-runs/events-that-trigger-workflows#schedule
    #schedule:
        # https://www.python-engineer.com/posts/run-python-github-actions/#cron-syntax-refresher
        #- cron: '30 13 * * *' # Every day at 13h30 UTC

     push:
        branches: [ "main" ]


jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - name: Copy 'user-agents.json.gz' file
          run: |
            git clone https://github.com/intoli/user-agents.git
            cd user-agents
            git remote set-url origin git@github.com:LeMoussel/user-agents-python.git
            cd ..
            git clone https://github.com/LeMoussel/user-agents-python.git
            cd user-agents-python
            git remote set-url origin git@github.com:LeMoussel/user-agents-python.git
            cd ..
            cp  user-agents/src/user-agents.json.gz user-agents-python/data/user-agents.json.gz

        - name: Commit and Push file
          run: |
            cd user-agents-python/data
            git config --global user.name "github-actions[bot]"
            git config --global user.email "github-actions[bot]@users.noreply.github.com"
            git add .
            git commit -m "Update 'user-agents.json.gz' file from Intoli 'user-agents' repository"
            git push
